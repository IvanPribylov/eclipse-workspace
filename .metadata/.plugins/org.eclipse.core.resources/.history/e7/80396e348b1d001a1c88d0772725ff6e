Narrative:
As a user
I want to Verify provide additional information

Meta:
@Mult

Scenario: 01. Login as end user, Go to Find Content > Paste Multi Citations
Given I am on login page
When I log in as "admin@at43.at" user
Then RFE page opens
When I go to Cart and Empty it
And I go to Paste Multiple Citations in main menu in Find Content submenu
Then Multi-Item Content Request page opens

Scenario: 02. Paste two citation
Given I am on Multi-Item Content Request page
When I fill Citation field on Multi-Item Content Request page line by line with value "<Citations>"
Then Verify Citations button is enabled on Multi-Item Content Request page

Examples:
|Citations|
|Hedgehog Signaling|
|2012 Elsevier|
|isbn:9780123946225; infotrieve:8059230|
| |
|An evidence-based approach to vitamins and minerals : health benefits and intake recommendations|
|2012 Thieme|
|isbn:9783131324528; lccn:2011015798; infotrieve:10485666 |

Scenario: 3. click "Verify Citations"
Given I am on Multi-Item Content Request page
When I click Verify Citations button on Multi-Item Content Request
Then Active step name on Multi-Item Content Request page is "Verify Citations"
And 2 citations have "Best Match" status on Multi-Item Content Request page
And Warning message for match #1 contains text "Please provide additional information"
And Warning message for match #2 contains text "Please provide additional information"

Scenario: 4.  click "! Please provide additional information"
Given I am on Multi-Item Content Request page
When I click warning message for match #1 on Multi-Item Content Request page
Then Modal dialog with title "ADDITIONAL CITATION INFO" opens

Scenario: 5. Specify additional info
Given Modal dialog with title "ADDITIONAL CITATION INFO" opened
When I fill "ADDITIONAL CITATION INFO" dialog with Type="Chapter", Pages="27", Chapter="1"
Then Multi-Item Content Request page opens

Scenario: 4.1.  click "! Please provide additional information"
Given I am on Multi-Item Content Request page
When I click warning message for match #2 on Multi-Item Content Request page
Then Modal dialog with title "ADDITIONAL CITATION INFO" opens

Scenario: 5.1. Specify additional info
Given Modal dialog with title "ADDITIONAL CITATION INFO" opened
When I fill "ADDITIONAL CITATION INFO" dialog with Type="Chapter", Pages="5", Chapter="1"
Then Multi-Item Content Request page opens

Scenario: 6. Click Continue
Given I am on Multi-Item Content Request page
When I click Continue button on Verify Citaions step on Multi-Item Content Request page
Then Active step name on Multi-Item Content Request page is "Select Usage/Delivery Options"
And Citation info for citation #1 on Multi-Item Content Request page contains text "Chapter 1; p:27;"
And Citation info for citation #2 on Multi-Item Content Request page contains text "Chapter 1; p:5"

Scenario: 7. set Intended Use of Copies := Use for Myself, click Get Pricing
Given I am on Multi-Item Content Request page
When I select value "Use for Myself" in Intended Use of Copies combobox on Select Usage/Delivery Options step on Multi-Item Content Request page
And I click Get Pricing button on Select Usage/Delivery Options step on Multi-Item Content Request page
Then Active step name on Multi-Item Content Request page is "Get Pricing & Place Order"
And Get content for the following use label has value "Use for Myself" on Get Pricing & Place Order step on Multi-Item Content Request page
And I can get price for citation #1 on Get Pricing & Place Order step on Multi-Item Content Request page
And I can get price for citation #2 on Get Pricing & Place Order step on Multi-Item Content Request page

Scenario: 8 Put in cart  
Given I am on Multi-Item Content Request page
When I click Put in Cart button on Get Pricing & Place Order step on Multi-Item Content Request page
Then Cart page opens
And There are '2' items in cart
And Usage for Item #1 in Cart is 'Ordering 1 copy for the following stated purpose: "Use for Myself"'
And Usage for Item #2 in Cart is 'Ordering 1 copy for the following stated purpose: "Use for Myself"'
And Delivery for item #1 is "Delivery of 1 copy via Email (PDF) to admin@at43.at" on Cart page
And Delivery for item #2 is "Delivery of 1 copy via Email (PDF) to admin@at43.at" on Cart page
And Price for Item #1 in Cart is the same as on Get Pricing & Place Order step on Multi-Item Content Request page
And Price for Item #2 in Cart is the same as on Get Pricing & Place Order step on Multi-Item Content Request page
And Citation info for citation #1 on Cart page contains text "Chapter 1; p:27;"
And Citation info for citation #2 on Cart page contains text "Chapter 1; p:5;"

Scenario: 9. Submit
Given I am on Cart page
When On "Cart" page I click on "Submit Content Request" button
Then Receipt page opens
And Request Number for item #1 displays on Receipt page
And Request Number for item #2 displays on Receipt page
